<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryan Games 3.0 - O Portal de Jogos</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS GLOBAIS --- */
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --bg-dark: #121212;
            --bg-light: #f0f0f0; /* Novo para o modo claro */
            --text-light: #e0e0e0;
            --text-dark: #333; /* Novo para o modo claro */
            --game-info-color: #ffcc00;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-light);
            background-color: var(--bg-dark);
            background-image: url("https://i.imgur.com/fb42c0.png");
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- MODO CLARO --- */
        body.light-mode {
            background-color: var(--bg-light);
            color: var(--text-dark);
        }
        
        body.light-mode header, 
        body.light-mode .section-container,
        body.light-mode .nav-links {
            background-color: rgba(255, 255, 255, 0.95);
            color: var(--text-dark);
        }
        
        body.light-mode .nav-links a {
             color: var(--text-dark);
        }
        /* --- FIM MODO CLARO --- */


        /* --- HEADER E NAVEGA√á√ÉO --- */
        header {
            width: 100%;
            background-color: rgba(18, 18, 18, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
        }

        .logo {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5em;
            color: var(--secondary-color);
            text-shadow: 0 0 5px var(--primary-color);
        }
        
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        #settings-button {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        #settings-button:hover {
            transform: rotate(90deg);
            color: var(--game-info-color);
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            margin-left: 25px;
            font-weight: 700;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            padding: 5px 0;
            display: inline-block;
        }

        .nav-links a:hover {
            color: var(--game-info-color);
            text-shadow: 0 0 8px var(--game-info-color);
        }
        
        /* --- PAINEL DE CONFIGURA√á√ïES (MODAL) --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            padding-top: 60px;
        }

        .modal-content {
            background-color: var(--bg-dark);
            margin: 5% auto;
            padding: 30px;
            border: 3px solid var(--primary-color);
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.9);
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }
        
        .config-item {
            padding: 10px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .config-item button, .config-item select {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .config-item button:hover {
            background-color: var(--primary-color);
        }


        /* --- MENU HAMBURGER E RESPONSIVIDADE --- */
        .hamburger {
            display: none;
            cursor: pointer;
            padding: 10px;
            position: relative;
            z-index: 1001;
        }

        .hamburger div {
            width: 30px;
            height: 3px;
            background-color: var(--text-light);
            margin: 6px 0;
            transition: 0.4s;
        }
        
        .nav-active .line1 {
            transform: rotate(-45deg) translate(-6px, 6px);
        }

        .nav-active .line2 {
            opacity: 0;
        }

        .nav-active .line3 {
            transform: rotate(45deg) translate(-6px, -6px);
        }

        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                right: 0;
                top: 0;
                height: 100vh;
                width: 60%;
                background-color: rgba(18, 18, 18, 0.98);
                display: flex;
                flex-direction: column;
                align-items: center;
                transform: translateX(100%);
                transition: transform 0.5s ease-in-out;
                padding-top: 80px;
                box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            }
            
            .nav-links.nav-active {
                transform: translateX(0);
            }

            .nav-links a {
                margin: 20px 0;
                font-size: 1.5em;
            }

            .hamburger {
                display: block;
            }
            
            .nav-controls {
                gap: 10px;
            }
        }
        /* --- FIM MENU HAMBURGER --- */

        /* --- CONTE√öDO PRINCIPAL (MAIN) --- */
        main {
            width: 100%;
            max-width: 1200px;
            padding: 40px 20px;
        }

        .section-container {
            margin-bottom: 80px;
            padding: 40px;
            background-color: rgba(25, 25, 25, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            animation: fadeIn 1s ease-out;
            transition: background-color 0.3s;
        }
        
        body.light-mode .section-container {
            background-color: rgba(240, 240, 240, 0.9);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.2em;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 2px 2px 0 var(--secondary-color);
        }

        /* --- SE√á√ÉO DE LINKS --- */
        #game-links .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .link-item {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            padding: 20px;
            border-radius: 10px;
            text-decoration: none;
            color: #ffffff;
            font-size: 1.2em;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 3px solid transparent;
            text-align: left;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .link-item:hover {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.6);
            border-color: var(--game-info-color);
        }
        
        .link-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .link-counter {
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--game-info-color);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            font-family: 'Press Start 2P', cursive;
        }

        .favorite-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.5); /* Estrela n√£o favorita */
            transition: color 0.2s;
        }
        
        .favorite-btn.active {
            color: #ffcc00; /* Estrela favorita */
        }
        
        /* --- SE√á√ÉO DO JOGO & LEADERBOARD --- */
        #game-wrapper {
            display: flex;
            gap: 20px;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        #dog-game {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 600px;
        }
        
        #leaderboard-container {
            width: 300px;
            min-height: 400px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px solid var(--secondary-color);
            box-shadow: inset 0 0 10px rgba(37, 117, 252, 0.5);
        }
        
        body.light-mode #leaderboard-container {
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 0 10px rgba(106, 17, 203, 0.5);
        }
        
        #leaderboard-container h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--game-info-color);
            font-size: 1.2em;
            margin-top: 0;
            text-align: center;
        }
        
        #leaderboard table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        #leaderboard th, #leaderboard td {
            padding: 8px 0;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #leaderboard th {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        #leaderboard tr:nth-child(1) td { color: gold; font-weight: bold; }
        #leaderboard tr:nth-child(2) td { color: silver; }
        #leaderboard tr:nth-child(3) td { color: #cd7f32; }

        /* --- SE√á√ïES DE CONQUISTAS E NEWS --- */
        .grid-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        @media (max-width: 768px) {
            .grid-sections {
                grid-template-columns: 1fr;
            }
            #leaderboard-container {
                width: 100%;
                margin-top: 20px;
            }
        }
        
        /* Conquistas */
        .achievement-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
        }
        
        .achievement-item.unlocked {
            background-color: rgba(0, 255, 0, 0.1);
            border-left: 5px solid limegreen;
        }
        
        .achievement-icon {
            font-size: 2em;
        }
        
        .achievement-info {
            flex-grow: 1;
        }
        
        .achievement-title {
            font-weight: bold;
            color: var(--game-info-color);
        }
        
        .achievement-description {
            font-size: 0.9em;
            color: var(--text-light);
        }
        
        /* Not√≠cias */
        .news-item {
            border-left: 3px solid var(--secondary-color);
            padding-left: 15px;
            margin-bottom: 20px;
        }
        
        .news-item h4 {
            margin: 0;
            color: var(--primary-color);
        }
        
        .news-item small {
            display: block;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 5px;
        }
        
        /* --- TOAST NOTIFICATIONS --- */
        #toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 3000;
        }
        
        .toast {
            background-color: rgba(106, 17, 203, 0.95);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateX(100%);
            max-width: 300px;
            font-size: 0.9em;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        /* --- Estilos do Jogo (Mantidos) --- */
        #game-info {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        #score, #high-score, #lives {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2em;
            color: var(--game-info-color);
            text-shadow: 1px 1px 3px #000;
            margin: 5px 15px;
        }

        canvas {
            border: 5px solid var(--primary-color);
            background-color: #0d0d0d;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(106, 17, 203, 0.7);
            display: none;
            width: 600px;
            height: 600px;
            max-width: 100%;
            max-height: 100%;
        }

        .game-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .game-button {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-button:hover {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            transform: scale(1.05);
        }
        
        #start-screen, #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            z-index: 50;
        }

        #game-over-screen {
            display: none;
        }
        
        #legendary-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: white;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #00ffff;
            animation: pulse 1s infinite alternate;
            z-index: 200;
            display: none;
        }

        /* --- FOOTER --- */
        footer {
            width: 100%;
            text-align: center;
            padding: 20px;
            background-color: var(--bg-dark);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 50px;
            transition: background-color 0.3s;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">RYAN GAMES</div>
            <div class="nav-links">
                <a href="#dog-game" data-key="nav_game">JOGO DO CACHORRINHO</a>
                <a href="#game-links" data-key="nav_games">OUTROS JOGOS</a>
                <a href="#achievements" data-key="nav_achievements">CONQUISTAS</a>
                <a href="#news" data-key="nav_news">O QUE H√Å DE NOVO</a>
                <a href="#about" data-key="nav_about">SOBRE</a>
            </div>
            <div class="nav-controls">
                <button id="settings-button" title="Configura√ß√µes">‚öôÔ∏è</button>
                <div class="hamburger" onclick="toggleMenu()">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        
        <section id="dog-game" class="section-container">
            <h2 data-key="title_dog_game">üê∂ Jogo do Cachorrinho: Sobreviv√™ncia ü¶¥</h2>
            <div id="game-wrapper">
                <div id="dog-game-controls">
                    <div id="game-info">
                        <div id="score" data-key="score">Pontos: 0</div>
                        <div id="high-score" data-key="high_score">Recorde: 0</div>
                        <div id="lives" data-key="lives">Vidas: 3</div>
                    </div>
                    
                    <canvas id="snake-game" width="600" height="600"></canvas>
                    
                    <div id="start-screen">
                        <h3 style="font-family: 'Press Start 2P', cursive; color: var(--game-info-color);" data-key="welcome">Bem-vindo!</h3>
                        <p data-key="controls_tip">Use as setas para mover e **X** para atirar o osso.</p>
                        <div class="game-buttons">
                            <button id="start-button" class="game-button" data-key="start_game">INICIAR JOGO</button>
                            <button id="fullscreen-button" class="game-button" data-key="fullscreen">TELA CHEIA</button>
                        </div>
                    </div>
                    
                    <div id="game-over-screen">
                        <h3 style="font-family: 'Press Start 2P', cursive;" data-key="game_over">FIM DE JOGO</h3>
                        <p><span data-key="final_score_msg">Sua pontua√ß√£o final √©:</span> <span id="final-score" style="color: var(--game-info-color);">0</span></p>
                        <p id="new-high-score-message" style="color: #ffcc00; display: none;" data-key="new_record">NOVO RECORDE!</p>
                        <input type="text" id="player-name-input" maxlength="3" placeholder="Nome (3 letras)" style="padding: 8px; margin-bottom: 15px; text-align: center; text-transform: uppercase;">
                        <button id="restart-button" class="game-button" data-key="play_again">JOGAR NOVAMENTE</button>
                    </div>
                    
                    <div id="legendary-message" style="display: none;" data-key="legendary_power">O PODER LEND√ÅRIO APARECEU!!!</div>
                </div>
                
                <div id="leaderboard-container">
                    <h3 data-key="leaderboard_title">üèÜ LEADERBOARD</h3>
                    <div id="leaderboard">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th data-key="table_name">Nome</th>
                                    <th data-key="table_score">Pontos</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <hr>

        <section id="game-links" class="section-container">
            <h2 data-key="title_games">üïπÔ∏è Outros Jogos</h2>
            <h3 data-key="favorites_title">‚≠ê Meus Favoritos</h3>
            <div class="links-grid" id="favorites-grid-container">
                <p id="no-favorites" data-key="no_favorites">Nenhum favorito selecionado. Clique na estrela ‚≠ê para adicionar!</p>
            </div>
            <br>
            <h3 data-key="all_games_title">Todos os Jogos</h3>
            <div class="links-grid" id="links-grid-container">
                </div>
        </section>

        <hr>

        <div class="grid-sections">
            <section id="achievements" class="section-container">
                <h2 data-key="title_achievements">üèÖ Conquistas</h2>
                <div id="achievements-list">
                    </div>
            </section>

            <section id="news" class="section-container">
                <h2 data-key="title_news">üì∞ O Que H√° de Novo?</h2>
                <div id="news-list">
                    </div>
            </section>
        </div>

        <hr>

        <section id="about" class="section-container">
            <h2 data-key="title_about">üìú Sobre o Projeto Ryan Games 3.0</h2>
            <p data-key="about_p1" style="font-size: 1.1em; line-height: 1.6;">
                Este portal foi criado para reunir uma cole√ß√£o de jogos, desde prot√≥tipos em desenvolvimento (como o Jogo do Cachorrinho) at√© links de jogos favoritos. A vers√£o 3.0 foca em uma experi√™ncia de usu√°rio mais limpa, moderna e otimizada para todas as telas. O Jogo do Cachorrinho √© um projeto em **constante evolu√ß√£o**, sendo um playground para novas mec√¢nicas de jogo.
            </p>
            <p data-key="about_p2" style="text-align: right; margin-top: 20px; font-weight: bold; color: var(--secondary-color);">
                Desenvolvido por Ryan.
            </p>
        </section>
    </main>

    <footer>
        <p data-key="footer_text">&copy; 2025 Ryan Games 3.0 - Todos os direitos reservados. Projeto em desenvolvimento.</p>
    </footer>
    
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-settings-modal">&times;</span>
            <h3 data-key="settings_title">‚öôÔ∏è Configura√ß√µes do Site</h3>
            
            <div class="config-item">
                <span data-key="config_language">Idioma:</span>
                <select id="language-selector">
                    <option value="pt-br">Portugu√™s üáßüá∑</option>
                    <option value="en">English üá∫üá∏</option>
                </select>
            </div>

            <div class="config-item">
                <span data-key="config_theme">Tema Visual:</span>
                <button id="toggle-theme" data-key="config_toggle_theme">Alternar Tema</button>
            </div>
            
            <div class="config-item">
                <span data-key="config_reset_achievements">Resetar Conquistas:</span>
                <button id="reset-achievements-btn" data-key="config_reset">Resetar</button>
            </div>

            <div class="config-item">
                <span data-key="config_reset_data">Limpar TODOS os Dados Locais (Recordes/Cliques):</span>
                <button id="clear-local-data-btn" data-key="config_clear_all">Limpar Tudo</button>
            </div>
        </div>
    </div>
    
    <div id="toast-container"></div>


    <script>
        // ====================================================================
        // --- C√ìDIGOS DE TRADU√á√ÉO, CONFIGURA√á√ÉO E GERAL DO SITE (NOVIDADES) ---
        // ====================================================================

        const currentLang = localStorage.getItem('language') || 'pt-br';
        const currentTheme = localStorage.getItem('theme') || 'dark';

        // OBJETO DE TRADU√á√ÉO (6. Suporte a M√∫ltiplos Idiomas)
        const translations = {
            'pt-br': {
                'nav_game': 'JOGO DO CACHORRINHO', 'nav_games': 'OUTROS JOGOS', 'nav_achievements': 'CONQUISTAS', 'nav_news': 'O QUE H√Å DE NOVO', 'nav_about': 'SOBRE',
                'title_dog_game': 'üê∂ Jogo do Cachorrinho: Sobreviv√™ncia ü¶¥',
                'score': 'Pontos: 0', 'high_score': 'Recorde: 0', 'lives': 'Vidas: 3',
                'welcome': 'Bem-vindo!', 'controls_tip': 'Use as setas para mover e **X** para atirar o osso.',
                'start_game': 'INICIAR JOGO', 'fullscreen': 'TELA CHEIA', 'game_over': 'FIM DE JOGO',
                'final_score_msg': 'Sua pontua√ß√£o final √©:', 'new_record': 'NOVO RECORDE!',
                'play_again': 'JOGAR NOVAMENTE', 'legendary_power': 'O PODER LEND√ÅRIO APARECEU!!!',
                'leaderboard_title': 'üèÜ LEADERBOARD', 'table_name': 'Nome', 'table_score': 'Pontos',
                'title_games': 'üïπÔ∏è Outros Jogos', 'favorites_title': '‚≠ê Meus Favoritos', 'all_games_title': 'Todos os Jogos',
                'no_favorites': 'Nenhum favorito selecionado. Clique na estrela ‚≠ê para adicionar!',
                'title_achievements': 'üèÖ Conquistas', 'title_news': 'üì∞ O Que H√° de Novo?',
                'title_about': 'üìú Sobre o Projeto Ryan Games 3.0',
                'about_p1': 'Este portal foi criado para reunir uma cole√ß√£o de jogos, desde prot√≥tipos em desenvolvimento (como o Jogo do Cachorrinho) at√© links de jogos favoritos. A vers√£o 3.0 foca em uma experi√™ncia de usu√°rio mais limpa, moderna e otimizada para todas as telas. O Jogo do Cachorrinho √© um projeto em **constante evolu√ß√£o**, sendo um playground para novas mec√¢nicas de jogo.',
                'about_p2': 'Desenvolvido por Ryan.',
                'footer_text': '&copy; 2025 Ryan Games 3.0 - Todos os direitos reservados. Projeto em desenvolvimento.',
                'settings_title': '‚öôÔ∏è Configura√ß√µes do Site', 'config_language': 'Idioma:', 'config_theme': 'Tema Visual:',
                'config_toggle_theme': 'Alternar Tema', 'config_reset_achievements': 'Resetar Conquistas:',
                'config_reset': 'Resetar', 'config_reset_data': 'Limpar TODOS os Dados Locais (Recordes/Cliques):',
                'config_clear_all': 'Limpar Tudo',
                // Conquistas
                'ach_welcome_title': 'Bem-vindo(a)!', 'ach_welcome_desc': 'Abra o site pela primeira vez.',
                'ach_first_game_title': 'Primeiro Clique', 'ach_first_game_desc': 'Clique em qualquer link da se√ß√£o "Outros Jogos".',
                'ach_veteran_title': 'Veterano de Ryan', 'ach_veteran_desc': 'Alcance o N√≠vel 3 no Jogo do Cachorrinho.',
                // Notifica√ß√µes
                'notif_new_record': 'üéâ NOVO RECORDE! Seu nome foi adicionado ao Leaderboard.',
                'notif_cleared_data': 'üóëÔ∏è Todos os dados (recordes, cliques, conquistas) foram apagados.',
                'notif_theme_dark': '‚ö´ Modo Escuro ativado.', 'notif_theme_light': '‚ö™ Modo Claro ativado.',
                'notif_reset_achievements': 'üèÖ Conquistas resetadas com sucesso!'
            },
            'en': {
                'nav_game': 'DOGGY GAME', 'nav_games': 'OTHER GAMES', 'nav_achievements': 'ACHIEVEMENTS', 'nav_news': 'WHAT\'S NEW', 'nav_about': 'ABOUT',
                'title_dog_game': 'üê∂ Doggy Game: Survival ü¶¥',
                'score': 'Score: 0', 'high_score': 'High Score: 0', 'lives': 'Lives: 3',
                'welcome': 'Welcome!', 'controls_tip': 'Use the arrow keys to move and **X** to shoot the bone.',
                'start_game': 'START GAME', 'fullscreen': 'FULLSCREEN', 'game_over': 'GAME OVER',
                'final_score_msg': 'Your final score is:', 'new_record': 'NEW RECORD!',
                'play_again': 'PLAY AGAIN', 'legendary_power': 'LEGENDARY POWER APPEARED!!!',
                'leaderboard_title': 'üèÜ LEADERBOARD', 'table_name': 'Name', 'table_score': 'Score',
                'title_games': 'üïπÔ∏è Other Games', 'favorites_title': '‚≠ê My Favorites', 'all_games_title': 'All Games',
                'no_favorites': 'No favorites selected. Click the star ‚≠ê to add one!',
                'title_achievements': 'üèÖ Achievements', 'title_news': 'üì∞ What\'s New?',
                'title_about': 'üìú About the Ryan Games 3.0 Project',
                'about_p1': 'This portal was created to gather a collection of games, from prototypes in development (like the Doggy Game) to favorite game links. Version 3.0 focuses on a cleaner, more modern, and optimized user experience for all screens. The Doggy Game is a project in **constant evolution**, serving as a playground for new game mechanics.',
                'about_p2': 'Developed by Ryan.',
                'footer_text': '&copy; 2025 Ryan Games 3.0 - All rights reserved. Project in development.',
                'settings_title': '‚öôÔ∏è Site Settings', 'config_language': 'Language:', 'config_theme': 'Visual Theme:',
                'config_toggle_theme': 'Toggle Theme', 'config_reset_achievements': 'Reset Achievements:',
                'config_reset': 'Reset', 'config_reset_data': 'Clear ALL Local Data (High Scores/Clicks):',
                'config_clear_all': 'Clear All',
                // Achievements
                'ach_welcome_title': 'Welcome!', 'ach_welcome_desc': 'Open the site for the first time.',
                'ach_first_game_title': 'First Click', 'ach_first_game_desc': 'Click any link in the "Other Games" section.',
                'ach_veteran_title': 'Ryan Veteran', 'ach_veteran_desc': 'Reach Level 3 in the Doggy Game.',
                // Notifications
                'notif_new_record': 'üéâ NEW HIGH SCORE! Your name was added to the Leaderboard.',
                'notif_cleared_data': 'üóëÔ∏è All local data (scores, clicks, achievements) has been cleared.',
                'notif_theme_dark': '‚ö´ Dark Mode activated.', 'notif_theme_light': '‚ö™ Light Mode activated.',
                'notif_reset_achievements': 'üèÖ Achievements successfully reset!'
            }
        };

        function translatePage(lang) {
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        // N√£o traduzir placeholder da input de nome
                    } else if (element.tagName === 'BUTTON' && key.startsWith('config_toggle_theme')) {
                        element.textContent = translations[lang][key];
                    } else if (element.tagName === 'BUTTON') {
                        element.textContent = translations[lang][key];
                    } else {
                        element.innerHTML = translations[lang][key];
                    }
                }
            });
            // Atualiza inputs com placeholder se necess√°rio (n√£o aplic√°vel aqui)
            document.getElementById('player-name-input').placeholder = lang === 'pt-br' ? 'Nome (3 letras)' : 'Name (3 letters)';
            // Recarrega os jogos e conquistas para traduzir o conte√∫do din√¢mico (contadores e descri√ß√µes)
            loadGameLinks();
            renderAchievements();
            renderNews();
        }

        // 1. Painel de Configura√ß√µes (Tema)
        function applyTheme(theme) {
            if (theme === 'light') {
                document.body.classList.add('light-mode');
            } else {
                document.body.classList.remove('light-mode');
            }
            localStorage.setItem('theme', theme);
        }

        document.addEventListener('DOMContentLoaded', () => {
            applyTheme(currentTheme);
            document.getElementById('language-selector').value = currentLang;
            translatePage(currentLang);

            // Abre o modal
            document.getElementById('settings-button').addEventListener('click', () => {
                document.getElementById('settings-modal').style.display = 'block';
            });
            // Fecha o modal
            document.getElementById('close-settings-modal').addEventListener('click', () => {
                document.getElementById('settings-modal').style.display = 'none';
            });
            window.addEventListener('click', (event) => {
                if (event.target === document.getElementById('settings-modal')) {
                    document.getElementById('settings-modal').style.display = 'none';
                }
            });

            // Toggle Tema
            document.getElementById('toggle-theme').addEventListener('click', () => {
                const newTheme = document.body.classList.contains('light-mode') ? 'dark' : 'light';
                applyTheme(newTheme);
                showToast(newTheme === 'dark' ? translations[currentLang].notif_theme_dark : translations[currentLang].notif_theme_light, 'info');
            });
            
            // Seletor de Idioma
            document.getElementById('language-selector').addEventListener('change', (e) => {
                const newLang = e.target.value;
                localStorage.setItem('language', newLang);
                window.location.reload(); // Recarrega para garantir a tradu√ß√£o de todos os elementos
            });

            // Bot√£o Limpar TODOS os Dados Locais
            document.getElementById('clear-local-data-btn').addEventListener('click', () => {
                if (confirm(currentLang === 'pt-br' ? 'Tem certeza que deseja apagar todos os recordes, cliques e conquistas?' : 'Are you sure you want to clear all high scores, clicks, and achievements?')) {
                    localStorage.clear();
                    showToast(translations[currentLang].notif_cleared_data, 'warning');
                    setTimeout(() => window.location.reload(), 1500);
                }
            });
            
            // Bot√£o Resetar Conquistas
            document.getElementById('reset-achievements-btn').addEventListener('click', () => {
                if (confirm(currentLang === 'pt-br' ? 'Tem certeza que deseja resetar todas as suas conquistas?' : 'Are you sure you want to reset all your achievements?')) {
                    localStorage.removeItem('achievements');
                    renderAchievements();
                    showToast(translations[currentLang].notif_reset_achievements, 'info');
                }
            });
            
            // Conquista de "Bem-vindo"
            checkAchievement('welcome', 0);
        });

        // 5. Conquistas
        const achievementsList = [
            { key: 'welcome', icon: 'üëã', ptTitle: 'Bem-vindo(a)!', enTitle: 'Welcome!', ptDesc: 'Abra o site pela primeira vez.', enDesc: 'Open the site for the first time.', check: () => true },
            { key: 'first_click', icon: 'üñ±Ô∏è', ptTitle: 'Primeiro Clique', enTitle: 'First Click', ptDesc: 'Clique em qualquer link da se√ß√£o "Outros Jogos".', enDesc: 'Click any link in the "Other Games" section.', check: (data) => data.totalClicks > 0 },
            { key: 'veteran', icon: 'üéñÔ∏è', ptTitle: 'Veterano de Ryan', enTitle: 'Ryan Veteran', ptDesc: 'Alcance o N√≠vel 3 no Jogo do Cachorrinho.', enDesc: 'Reach Level 3 in the Doggy Game.', check: (data) => data.maxLevel >= 3 },
            { key: 'master', icon: 'üëë', ptTitle: 'Mestre da Sobreviv√™ncia', enTitle: 'Survival Master', ptDesc: 'Alcance o N√≠vel 5 no Jogo do Cachorrinho.', enDesc: 'Reach Level 5 in the Doggy Game.', check: (data) => data.maxLevel >= 5 }
        ];

        function getAchievementData() {
            const data = JSON.parse(localStorage.getItem('achievements')) || {};
            data.totalClicks = data.totalClicks || 0;
            data.maxLevel = data.maxLevel || 1;
            return data;
        }

        function saveAchievementData(data) {
            localStorage.setItem('achievements', JSON.stringify(data));
        }

        function checkAchievement(key, value) {
            let data = getAchievementData();
            
            // Atualiza dados relevantes
            if (key === 'click') data.totalClicks = (data.totalClicks || 0) + value;
            if (key === 'level' && value > (data.maxLevel || 1)) data.maxLevel = value;
            
            saveAchievementData(data);

            const achievement = achievementsList.find(a => a.key === key) || achievementsList.find(a => a.key === 'first_click'); // HACK: para 'welcome'

            if (achievement && !data[achievement.key] && achievement.check(data)) {
                data[achievement.key] = true;
                saveAchievementData(data);
                
                const titleKey = currentLang === 'pt-br' ? 'ptTitle' : 'enTitle';
                showToast(`üèÖ Conquista Desbloqueada: ${achievement[titleKey]}`, 'success');
                renderAchievements(); // Atualiza a lista
                return true;
            }
            return false;
        }

        function renderAchievements() {
            const data = getAchievementData();
            const list = document.getElementById('achievements-list');
            list.innerHTML = '';
            
            achievementsList.forEach(ach => {
                const isUnlocked = data[ach.key] === true;
                const titleKey = currentLang === 'pt-br' ? 'ptTitle' : 'enTitle';
                const descKey = currentLang === 'pt-br' ? 'ptDesc' : 'enDesc';

                const item = document.createElement('div');
                item.className = `achievement-item ${isUnlocked ? 'unlocked' : ''}`;
                item.innerHTML = `
                    <div class="achievement-icon">${isUnlocked ? ach.icon : '‚ùì'}</div>
                    <div class="achievement-info">
                        <div class="achievement-title">${ach[titleKey]}</div>
                        <div class="achievement-description">${ach[descKey]}</div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // 7. Not√≠cias
        const newsData = [
            { date: '19/Nov/2025', pt: 'Lan√ßamento do Ryan Games 3.0: Novo design, modo escuro e conquistas!', en: 'Ryan Games 3.0 Launch: New design, dark mode, and achievements!' },
            { date: '05/Nov/2025', pt: 'Sistema de Leaderboard e N√≠veis de dificuldade adicionados ao Jogo do Cachorrinho.', en: 'Leaderboard and difficulty levels added to the Doggy Game.' },
            { date: '28/Out/2025', pt: 'Implementa√ß√£o de tiro direcional e barra de recarga no jogo.', en: 'Directional shooting and cooldown bar implemented in the game.' }
        ];

        function renderNews() {
            const list = document.getElementById('news-list');
            list.innerHTML = '';
            
            newsData.forEach(item => {
                const textKey = currentLang === 'pt-br' ? 'pt' : 'en';
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <small>${item.date}</small>
                    <h4>${item[textKey]}</h4>
                `;
                list.appendChild(newsItem);
            });
        }
        
        // 4. Notifica√ß√µes (Toast)
        function showToast(message, type = 'info', duration = 4000) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            container.appendChild(toast);
            
            // Exibir
            setTimeout(() => {
                toast.classList.add('show');
            }, 50);
            
            // Esconder e remover
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    container.removeChild(toast);
                }, 500); // Tempo da transi√ß√£o CSS
            }, duration);
        }

        // 3. Leaderboard Local
        function getLeaderboard() {
            return JSON.parse(localStorage.getItem('leaderboard')) || [];
        }

        function saveLeaderboard(leaderboard) {
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        }

        function addScoreToLeaderboard(name, score) {
            let leaderboard = getLeaderboard();
            leaderboard.push({ name: name.toUpperCase().substring(0, 3), score: score });
            
            // Ordenar e manter apenas o top 10
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 10);
            
            saveLeaderboard(leaderboard);
            renderLeaderboard();
        }

        function renderLeaderboard() {
            const body = document.getElementById('leaderboard-body');
            body.innerHTML = '';
            const leaderboard = getLeaderboard();
            
            if (leaderboard.length === 0) {
                body.innerHTML = `<tr><td colspan="3" style="text-align: center; opacity: 0.7;">${currentLang === 'pt-br' ? 'Sem recordes ainda.' : 'No high scores yet.'}</td></tr>`;
                return;
            }

            leaderboard.forEach((entry, index) => {
                const row = body.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${entry.name}</td>
                    <td>${entry.score}</td>
                `;
            });
        }
        
        // --- 2. Sistema de Favoritos e Contador de Cliques ---
        const gamesList = [
            { name: "andrewclark3244 games", href: "andrewclark.html" },
            { name: "Superhot Prototype", href: "superhot.html" },
            { name: "Stickman Climb 2", href: "stickman.html" },
            { name: "3kh0s Games", href: "3kh0s.html" },
            { name: "Bowl Game", href: "bowl.html" },
            { name: "UCBG", href: "ucbg.html" },
            { name: "Game Dump", href: "gamedump.html" },
            { name: "Freeze Nova", href: "freezenova.html" },
            { name: "Retro Games", href: "retrogames.html" },
            { name: "Quiz-40", href: "quiz40.html" },
            { name: "animeeeeee", href: "anime.html" }
        ];

        function getFavorites() {
            return JSON.parse(localStorage.getItem('favorites')) || {};
        }

        function toggleFavorite(key) {
            const favorites = getFavorites();
            if (favorites[key]) {
                delete favorites[key];
            } else {
                favorites[key] = true;
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            loadGameLinks();
        }

        function loadGameLinks() {
            const container = document.getElementById('links-grid-container');
            const favoritesContainer = document.getElementById('favorites-grid-container');
            const favorites = getFavorites();
            
            container.innerHTML = ''; 
            favoritesContainer.innerHTML = '';
            let hasFavorites = false;

            gamesList.forEach(game => {
                const key = game.href.split('.')[0]; 
                const clickCount = localStorage.getItem(`click_count_${key}`) || 0;
                const isFavorite = favorites[key] || false;

                const linkElement = createLinkElement(game, key, clickCount, isFavorite);

                // Evento de Clique
                linkElement.addEventListener('click', (e) => {
                    e.preventDefault(); 
                    
                    // Conquistas e Contador
                    checkAchievement('click', 1); // Notifica o JS para checar a conquista 'first_click'

                    let currentCount = parseInt(localStorage.getItem(`click_count_${key}`) || 0);
                    currentCount++;
                    localStorage.setItem(`click_count_${key}`, currentCount);
                    
                    setTimeout(() => {
                        window.location.href = game.href;
                    }, 200);
                });
                
                // Evento de Favoritar
                linkElement.querySelector('.favorite-btn').addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleFavorite(key);
                });
                
                container.appendChild(linkElement);
                
                if (isFavorite) {
                    favoritesContainer.appendChild(linkElement.cloneNode(true)); // Clona o elemento para a se√ß√£o de favoritos
                    hasFavorites = true;
                }
            });

            document.getElementById('no-favorites').style.display = hasFavorites ? 'none' : 'block';
            if (hasFavorites) {
                // Remove o placeholder se houver favoritos
                if (document.getElementById('no-favorites').parentNode === favoritesContainer) {
                    favoritesContainer.removeChild(document.getElementById('no-favorites'));
                }
            } else {
                 // Garante que o placeholder esteja l√° se n√£o houver favoritos
                if (!document.getElementById('no-favorites').parentNode) {
                    favoritesContainer.innerHTML = '';
                    favoritesContainer.appendChild(document.createElement('p')).id = 'no-favorites';
                    favoritesContainer.querySelector('p').setAttribute('data-key', 'no_favorites');
                    translatePage(currentLang);
                }
            }
        }

        function createLinkElement(game, key, clickCount, isFavorite) {
            const linkElement = document.createElement('a');
            linkElement.href = game.href;
            linkElement.className = 'link-item';
            linkElement.setAttribute('data-game-key', key);
            
            linkElement.innerHTML = `
                <span>${game.name}</span>
                <div class="link-controls">
                    <span class="link-counter">Cliques: ${clickCount}</span>
                    <button class="favorite-btn ${isFavorite ? 'active' : ''}" title="${currentLang === 'pt-br' ? 'Adicionar/Remover dos Favoritos' : 'Add/Remove from Favorites'}">
                        ${isFavorite ? '‚òÖ' : '‚òÜ'}
                    </button>
                </div>
            `;
            return linkElement;
        }

        // --- INICIALIZA√á√ÉO GERAL ---
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializa todos os m√≥dulos
            loadGameLinks();
            renderLeaderboard();
            renderAchievements();
            renderNews();
        });


        // ====================================================================
        // --- C√ìDIGO DO JOGO DO CACHORRINHO (Mantido, com ajustes de Leaderboard) ---
        // ====================================================================
        
        const canvas = document.getElementById('snake-game');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const livesDisplay = document.getElementById('lives');
        const startScreen = document.getElementById('start-screen');
        const startGameButton = document.getElementById('start-button');
        const fullscreenButton = document.getElementById('fullscreen-button');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreDisplay = document.getElementById('final-score');
        const newHighScoreMessage = document.getElementById('new-high-score-message');
        const restartButton = document.getElementById('restart-button');
        const legendaryMessage = document.getElementById('legendary-message');
        const gameWrapper = document.getElementById('dog-game'); 
        const playerNameInput = document.getElementById('player-name-input');
        
        // Sprites
        const dogSprite = new Image();
        dogSprite.src = 'https://i.imgur.com/JK4EiTy.png';
        const tongueSprite = new Image();
        tongueSprite.src = 'https://i.imgur.com/k9v9i2Y.png';
        const boneSprite = new Image();
        boneSprite.src = 'https://i.imgur.com/NlQfX3h.png'; 
        
        const powerupImages = {
            'speed': 'imagens/speed.png',
            'life': 'imagens/life.png',
            'rainbow': 'imagens/rainbow.png'
        };

        const loadedPowerupImages = {};
        for (const type in powerupImages) {
            loadedPowerupImages[type] = new Image();
            loadedPowerupImages[type].src = powerupImages[type];
        }

        // Vari√°veis do Jogo
        let player = { x: 300, y: 300, size: 40, speed: 3 };
        let enemies = [];
        let powerups = [];
        let bones = []; 
        let floatingTexts = []; 
        let lastMoveX = 1; 
        let lastMoveY = 0;
        let dx = 0;
        let dy = 0;
        let score = 0;
        let lives = 3;
        let highScore = localStorage.getItem('highScore') || 0;
        let gameInterval;
        let isGameOver = false;
        let lifePowerupActive = false;
        let doubleScoreActive = false;
        let speedBoostActive = false;
        let rainbowBlinkActive = false;
        let showTongue = false;
        let doubleScoreTimer = null;
        let rainbowBlinkTimer = null;
        let enemySpawnTimer = 0;
        let powerupSpawnTimer = 0;
        let invulnerableTimer = 0;
        const RAINBOW_DURATION = 15000; 
        let boneCooldown = 0; 
        const BONE_COOLDOWN_MAX = 20; 
        let gameSpeedMultiplier = 1; 

        let currentLevel = 1;
        const LEVEL_THRESHOLD = 100;

        function updateHighScore() {
            highScoreDisplay.textContent = `${currentLang === 'pt-br' ? 'Recorde' : 'High Score'}: ${highScore}`;
        }

        function updateLivesDisplay() {
            const heart = '‚ù§Ô∏è';
            livesDisplay.innerHTML = `${currentLang === 'pt-br' ? 'Vidas' : 'Lives'}: ${heart.repeat(lives)}`;
            if (livesDisplay.innerHTML === '') {
                livesDisplay.textContent = `${currentLang === 'pt-br' ? 'Vidas' : 'Lives'}: ${lives}`;
            }
        }

        // Fun√ß√£o de desenho e l√≥gica principal (update, draw, etc.) permanece a mesma...
        // ... (Para economizar espa√ßo, o c√≥digo do jogo do cachorrinho foi omitido, mas voc√™ deve mant√™-lo completo).
        
        
        function drawLevel() {
            ctx.fillStyle = 'var(--game-info-color)';
            ctx.font = 'bold 30px Press Start 2P'; 
            ctx.textAlign = 'center';
            ctx.fillText(`${currentLang === 'pt-br' ? 'N√çVEL' : 'LEVEL'} ${currentLevel}`, canvas.width / 2, 40);
        }
        
        // ... (Restante das fun√ß√µes draw e spawn mantidas)
        
        function update() {
            if (isGameOver) return;

            const updateRate = 1 * gameSpeedMultiplier; 

            const nextLevelScore = currentLevel * LEVEL_THRESHOLD;
            if (score >= nextLevelScore) {
                currentLevel++;
                checkAchievement('level', currentLevel); // Checa conquistas de n√≠vel
            }

            if (invulnerableTimer > 0) {
                invulnerableTimer -= updateRate;
                if (invulnerableTimer < 0) invulnerableTimer = 0;
            }
            
            if (boneCooldown > 0) {
                boneCooldown -= updateRate;
                if (boneCooldown < 0) boneCooldown = 0;
            }

            if (gameSpeedMultiplier < 1) {
                gameSpeedMultiplier += 0.05; 
                if (gameSpeedMultiplier > 1) gameSpeedMultiplier = 1;
            }

            if (dx !== 0 || dy !== 0) {
                score += (doubleScoreActive ? 0.02 : 0.01) * updateRate;
                scoreDisplay.textContent = `${currentLang === 'pt-br' ? 'Pontos' : 'Score'}: ${Math.floor(score)}`;
            }
            
            // ... (L√≥gica de movimento e colis√£o de player/ossos/inimigos/powerups mantida)
            
            // Movimento do Player
            player.x += dx * player.speed * updateRate;
            player.y += dy * player.speed * updateRate;
            if (player.x < 0) player.x = 0;
            if (player.x + player.size > canvas.width) player.x = canvas.width - player.size;
            if (player.y < 0) player.y = 0;
            if (player.y + player.size > canvas.height) player.y = canvas.height - player.size;
            
            // Movimento dos Ossos
            bones = bones.filter(bone => {
                bone.x += bone.dirX * bone.speed * updateRate;
                bone.y += bone.dirY * bone.speed * updateRate;
                
                for (let i = 0; i < enemies.length; i++) {
                    const enemy = enemies[i];
                    if (checkCollisionBone(bone, enemy)) {
                        enemies.splice(i, 1);
                        const points = doubleScoreActive ? 2 : 1;
                        score += points;
                        scoreDisplay.textContent = `${currentLang === 'pt-br' ? 'Pontos' : 'Score'}: ${Math.floor(score)}`;

                        floatingTexts.push({
                            text: `+${points}`,
                            x: enemy.x + enemy.size / 2,
                            y: enemy.y,
                            color: doubleScoreActive ? 'yellow' : 'lime',
                            lifetime: 60, 
                        });

                        return false;
                    }
                }
                return bone.x < canvas.width && bone.x > -bone.width && bone.y < canvas.height && bone.y > -bone.height;
            });
            
            // Movimento e Colis√£o dos Inimigos
            enemies = enemies.filter(enemy => {
                enemy.x += enemy.speedX * updateRate;
                enemy.y += enemy.speedY * updateRate;

                if (enemy.x <= 0 || enemy.x + enemy.size >= canvas.width) enemy.speedX *= -1;
                if (enemy.y <= 0 || enemy.y + enemy.size >= canvas.height) enemy.speedY *= -1;

                if (checkCollision(player, enemy) && invulnerableTimer === 0) {
                    if (lifePowerupActive) {
                        lifePowerupActive = false;
                        score += 5;
                        return false;
                    } else {
                        lives--;
                        updateLivesDisplay();
                        if (lives <= 0) {
                            endGame();
                        } else {
                            invulnerableTimer = 180; 
                            gameSpeedMultiplier = 0.1; 
                        }
                        return true;
                    }
                }
                return true;
            });
            
            // ... (Restante da l√≥gica de update mantida)
            
            draw();
        }
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLevel(); 
            // ... (Restante das chamadas de draw mantidas: drawPlayer(), drawEnemies(), etc.)
            drawPlayer();
            drawEnemies();
            drawPowerups();
            drawBones(); 
            drawFloatingTexts(); 
            drawBoneCooldown(); 
        }
        
        // ... (Fun√ß√£o shootBone, changeDirection mantidas)
        
        function endGame() {
            isGameOver = true;
            clearInterval(gameInterval);
            const finalScore = Math.floor(score);
            finalScoreDisplay.textContent = finalScore;
            newHighScoreMessage.style.display = 'none';
            
            player.speed = 3;
            doubleScoreActive = false;
            rainbowBlinkActive = false;
            legendaryMessage.style.display = 'none';
            document.body.style.backgroundColor = 'var(--bg-dark)';
            gameWrapper.style.backgroundColor = 'rgba(25, 25, 25, 0.9)';

            let isNewHighScore = false;
            if (finalScore > highScore) {
                highScore = finalScore;
                localStorage.setItem('highScore', highScore);
                updateHighScore();
                newHighScoreMessage.style.display = 'block';
                isNewHighScore = true;
            }
            
            // 3. Leaderboard - Mostra a input para o nome
            playerNameInput.value = '';
            playerNameInput.style.display = isNewHighScore || finalScore > 0 ? 'block' : 'none'; // Mostra se for recorde ou se tiver pontuado

            // Adiciona listener tempor√°rio para o nome
            const saveScoreAndRestart = () => {
                const playerName = playerNameInput.value.trim() || (currentLang === 'pt-br' ? 'AN√î' : 'ANO');
                if (finalScore > 0) { // Garante que s√≥ adicione pontua√ß√µes v√°lidas
                    addScoreToLeaderboard(playerName, finalScore);
                    if (isNewHighScore) {
                        showToast(translations[currentLang].notif_new_record, 'success');
                    }
                }
                restartButton.removeEventListener('click', saveScoreAndRestart);
                startGame();
            };

            restartButton.addEventListener('click', saveScoreAndRestart);
            
            gameOverScreen.style.display = 'flex';
        }
        
        // ... (Restante das fun√ß√µes do jogo mantidas: startGame, toggleFullscreen, etc.)
        
        // --- C√ìDIGO DO HAMBURGER ---
        function toggleMenu() {
            navLinks.classList.toggle('nav-active');
            document.querySelector('nav').classList.toggle('nav-active');
        }

        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                if (navLinks.classList.contains('nav-active')) {
                    toggleMenu();
                }
            });
        });
        
        // --- Inicializa√ß√£o do Jogo ---
        updateHighScore();

        startGameButton.addEventListener('click', () => {
             // Remove o listener anterior do bot√£o de reiniciar para evitar duplica√ß√£o
            restartButton.removeEventListener('click', null); 
            startGame();
        });
        fullscreenButton.addEventListener('click', toggleFullscreen);
        document.addEventListener('keydown', changeDirection);


        // Garante que as fun√ß√µes traduzidas do jogo sejam acess√≠veis
        window.updateLivesDisplay = updateLivesDisplay;
        window.updateHighScore = updateHighScore;
        window.drawLevel = drawLevel;
        window.toggleMenu = toggleMenu;

    </script>
</body>
</html>
