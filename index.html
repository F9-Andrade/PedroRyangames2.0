Entendido\! Voc√™ prefere a estrutura de **arquivo √∫nico** (`index.html`) para manter todo o c√≥digo em um s√≥ lugar (HTML, CSS e JavaScript), facilitando a c√≥pia e o compartilhamento.

O c√≥digo a seguir √© a vers√£o **final consolidada**, com todo o **HTML**, o **CSS** e o **JavaScript corrigido e funcional** para o Jogo do Cachorrinho, dentro de um √∫nico arquivo `index.html`.

### üìÑ C√≥digo Completo para `index.html` (Tudo em Um)

Crie um arquivo chamado **`index.html`** e copie e cole todo o c√≥digo abaixo nele.

```html
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryan Games 3.0 - Arquivo √önico</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS GLOBAIS --- */
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --bg-dark: #121212;
            --bg-light: #f0f0f0;
            --text-light: #e0e0e0;
            --text-dark: #333;
            --game-info-color: #ffcc00;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-light);
            background-color: var(--bg-dark);
            background-image: url("https://i.imgur.com/fb42c0.png");
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- MODO CLARO --- */
        body.light-mode {
            background-color: var(--bg-light);
            color: var(--text-dark);
        }

        body.light-mode header,
        body.light-mode .section-container {
            background-color: rgba(255, 255, 255, 0.95);
            color: var(--text-dark);
        }

        body.light-mode .nav-links a {
             color: var(--text-dark);
        }

        body.light-mode #leaderboard-container {
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 0 10px rgba(106, 17, 203, 0.5);
        }
        /* --- FIM MODO CLARO --- */


        /* --- HEADER E NAVEGA√á√ÉO --- */
        header {
            width: 100%;
            background-color: rgba(18, 18, 18, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
        }

        .logo {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5em;
            color: var(--secondary-color);
            text-shadow: 0 0 5px var(--primary-color);
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        #settings-button {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.3s;
        }

        #settings-button:hover {
            transform: rotate(90deg);
            color: var(--game-info-color);
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            margin-left: 25px;
            font-weight: 700;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            padding: 5px 0;
            display: inline-block;
        }

        .nav-links a:hover {
            color: var(--game-info-color);
            text-shadow: 0 0 8px var(--game-info-color);
        }

        /* --- MENU HAMBURGER E RESPONSIVIDADE (Simplificado para arquivo √∫nico) --- */
        .hamburger {
            display: none;
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none; /* Oculta o menu em telas pequenas, j√° que √© arquivo √∫nico */
            }
        }
        /* --- FIM MENU HAMBURGER --- */

        /* --- CONTE√öDO PRINCIPAL (MAIN) --- */
        main {
            width: 100%;
            max-width: 1200px;
            padding: 40px 20px;
        }

        .section-container {
            margin-bottom: 80px;
            padding: 40px;
            background-color: rgba(25, 25, 25, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            animation: fadeIn 1s ease-out;
            transition: background-color 0.3s;
        }

        body.light-mode .section-container {
            background-color: rgba(240, 240, 240, 0.9);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.2em;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 2px 2px 0 var(--secondary-color);
        }

        /* --- SE√á√ÉO DE LINKS --- */
        #game-links .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .link-item {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            padding: 20px;
            border-radius: 10px;
            text-decoration: none;
            color: #ffffff;
            font-size: 1.2em;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 3px solid transparent;
            text-align: left;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .link-item:hover {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.6);
            border-color: var(--game-info-color);
        }

        .link-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .link-counter {
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--game-info-color);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            font-family: 'Press Start 2P', cursive;
        }

        .favorite-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.5);
            transition: color 0.2s;
        }

        .favorite-btn.active {
            color: #ffcc00;
        }

        /* --- SE√á√ÉO DO JOGO & LEADERBOARD --- */
        #game-wrapper {
            display: flex;
            gap: 20px;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }

        #dog-game-controls {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 600px;
        }

        #leaderboard-container {
            width: 300px;
            min-height: 400px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px solid var(--secondary-color);
            box-shadow: inset 0 0 10px rgba(37, 117, 252, 0.5);
        }

        #leaderboard-container h3 {
            font-family: 'Press Start 2P', cursive;
            color: var(--game-info-color);
            font-size: 1.2em;
            margin-top: 0;
            text-align: center;
        }

        #leaderboard table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        #leaderboard th, #leaderboard td {
            padding: 8px 0;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #leaderboard th {
            color: var(--primary-color);
            font-weight: bold;
        }

        #leaderboard tr:nth-child(1) td { color: gold; font-weight: bold; }
        #leaderboard tr:nth-child(2) td { color: silver; }
        #leaderboard tr:nth-child(3) td { color: #cd7f32; }

        /* --- SE√á√ïES DE CONQUISTAS E NEWS --- */
        .grid-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        @media (max-width: 768px) {
            .grid-sections {
                grid-template-columns: 1fr;
            }
            #leaderboard-container {
                width: 100%;
                margin-top: 20px;
            }
        }

        /* Conquistas */
        .achievement-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
        }

        .achievement-item.unlocked {
            background-color: rgba(0, 255, 0, 0.1);
            border-left: 5px solid limegreen;
        }

        .achievement-icon {
            font-size: 2em;
        }

        .achievement-info {
            flex-grow: 1;
        }

        .achievement-title {
            font-weight: bold;
            color: var(--game-info-color);
        }

        .achievement-description {
            font-size: 0.9em;
            color: var(--text-light);
        }

        /* Not√≠cias */
        .news-item {
            border-left: 3px solid var(--secondary-color);
            padding-left: 15px;
            margin-bottom: 20px;
        }

        .news-item h4 {
            margin: 0;
            color: var(--primary-color);
        }

        .news-item small {
            display: block;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 5px;
        }

        /* --- TOAST NOTIFICATIONS --- */
        #toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 3000;
        }

        .toast {
            background-color: rgba(106, 17, 203, 0.95);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateX(100%);
            max-width: 300px;
            font-size: 0.9em;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* --- Estilos do Jogo (Mantidos) --- */
        #game-info {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        #score, #high-score, #lives {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2em;
            color: var(--game-info-color);
            text-shadow: 1px 1px 3px #000;
            margin: 5px 15px;
        }

        canvas {
            border: 5px solid var(--primary-color);
            background-color: #0d0d0d;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(106, 17, 203, 0.7);
            display: none;
            width: 600px;
            height: 600px;
            max-width: 100%;
            max-height: 100%;
        }

        .game-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .game-button {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-button:hover {
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            transform: scale(1.05);
        }

        #start-screen, #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            z-index: 50;
        }

        #game-over-screen {
            display: none;
        }

        #legendary-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: white;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #00ffff;
            animation: pulse 1s infinite alternate;
            z-index: 200;
            display: none;
        }
        /* --- PAINEL DE CONFIGURA√á√ïES (MODAL) --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            padding-top: 60px;
        }

        .modal-content {
            background-color: rgba(25, 25, 25, 0.95);
            margin: 5% auto;
            padding: 20px;
            border: 3px solid var(--primary-color);
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.9);
            position: relative;
        }

        .close-button {
            color: var(--text-light);
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--game-info-color);
            text-decoration: none;
            cursor: pointer;
        }

        .config-item {
            padding: 15px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .config-item:last-child {
            border-bottom: none;
        }

        .config-item button, .config-item select {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
        }

        .config-item button:hover {
            background-color: var(--primary-color);
        }
        /* --- FOOTER --- */
        footer {
            width: 100%;
            text-align: center;
            padding: 20px;
            background-color: var(--bg-dark);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 50px;
            transition: background-color 0.3s;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">RYAN GAMES</div>
            <div class="nav-links">
                <a href="#dog-game" data-key="nav_game">JOGO DO CACHORRINHO</a>
                <a href="#game-links" data-key="nav_games">OUTROS JOGOS</a>
                <a href="#achievements-section" data-key="nav_achievements">CONQUISTAS</a>
                <a href="#news-section" data-key="nav_news">O QUE H√Å DE NOVO</a>
                <a href="#about" data-key="nav_about">SOBRE</a>
            </div>
            <div class="nav-controls">
                <button id="settings-button" title="Configura√ß√µes">‚öôÔ∏è</button>
                <div class="hamburger" onclick="toggleMenu()">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                </div>
            </div>
        </nav>
    </header>

    <main>

        <section id="dog-game" class="section-container">
            <h2 data-key="title_dog_game">üê∂ Jogo do Cachorrinho: Sobreviv√™ncia ü¶¥</h2>
            <div id="game-wrapper">
                <div id="dog-game-controls">
                    <div id="game-info">
                        <div id="score" data-key="score">Pontos: 0</div>
                        <div id="high-score" data-key="high_score">Recorde: 0</div>
                        <div id="lives" data-key="lives">Vidas: 3</div>
                    </div>

                    <canvas id="snake-game" width="600" height="600"></canvas>

                    <div id="start-screen">
                        <h3 style="font-family: 'Press Start 2P', cursive; color: var(--game-info-color);" data-key="welcome">Bem-vindo!</h3>
                        <p data-key="controls_tip">Use as setas para mover e **X** para atirar o osso.</p>
                        <div class="game-buttons">
                            <button id="start-button" class="game-button" data-key="start_game">INICIAR JOGO</button>
                            <button id="fullscreen-button" class="game-button" data-key="fullscreen">TELA CHEIA</button>
                        </div>
                    </div>

                    <div id="game-over-screen">
                        <h3 style="font-family: 'Press Start 2P', cursive;" data-key="game_over">FIM DE JOGO</h3>
                        <p><span data-key="final_score_msg">Sua pontua√ß√£o final √©:</span> <span id="final-score" style="color: var(--game-info-color);">0</span></p>
                        <p id="new-high-score-message" style="color: #ffcc00; display: none;" data-key="new_record">NOVO RECORDE!</p>
                        <input type="text" id="player-name-input" maxlength="3" placeholder="Nome (3 letras)" style="padding: 8px; margin-bottom: 15px; text-align: center; text-transform: uppercase;">
                        <button id="restart-button" class="game-button" data-key="play_again">JOGAR NOVAMENTE</button>
                    </div>

                    <div id="legendary-message" style="display: none;" data-key="legendary_power">O PODER LEND√ÅRIO APARECEU!!!</div>
                </div>

                <div id="leaderboard-container">
                    <h3 data-key="leaderboard_title">üèÜ LEADERBOARD</h3>
                    <div id="leaderboard">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th data-key="table_name">Nome</th>
                                    <th data-key="table_score">Pontos</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <hr>

        <section id="game-links" class="section-container">
            <h2 data-key="title_games">üïπÔ∏è Outros Jogos</h2>
            <h3 data-key="favorites_title">‚≠ê Meus Favoritos</h3>
            <div class="links-grid" id="favorites-grid-container">
                <p id="no-favorites" data-key="no_favorites">Nenhum favorito selecionado. Clique na estrela ‚≠ê para adicionar!</p>
            </div>
            <br>
            <h3 data-key="all_games_title">Todos os Jogos</h3>
            <div class="links-grid" id="links-grid-container">
                </div>
        </section>

        <hr>

        <section id="achievements-section" class="section-container">
            <h2 data-key="title_achievements">üèÖ Conquistas</h2>
            <div id="achievements-list">
                </div>
        </section>

        <hr>

        <section id="news-section" class="section-container">
            <h2 data-key="title_news">üì∞ O Que H√° de Novo?</h2>
            <div id="news-list">
                </div>
        </section>

        <hr>

        <section id="about" class="section-container">
            <h2 data-key="title_about">üìú Sobre o Projeto Ryan Games 3.0</h2>
            <p data-key="about_p1" style="font-size: 1.1em; line-height: 1.6;">
                Este portal foi criado para reunir uma cole√ß√£o de jogos, desde prot√≥tipos em desenvolvimento (como o Jogo do Cachorrinho) at√© links de jogos favoritos. A vers√£o 3.0 foca em uma experi√™ncia de usu√°rio mais limpa, moderna e otimizada para todas as telas. O Jogo do Cachorrinho √© um projeto em **constante evolu√ß√£o**, sendo um playground para novas mec√¢nicas de jogo.
            </p>
            <p data-key="about_p2" style="text-align: right; margin-top: 20px; font-weight: bold; color: var(--secondary-color);">
                Desenvolvido por Ryan.
            </p>
        </section>
    </main>

    <footer>
        <p data-key="footer_text">&copy; 2025 Ryan Games 3.0 - Todos os direitos reservados. Projeto em desenvolvimento.</p>
    </footer>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-settings-modal">&times;</span>
            <h2 data-key="settings_title">‚öôÔ∏è Configura√ß√µes do Site</h2>

            <div class="config-item">
                <span data-key="config_language">Idioma:</span>
                <select id="language-selector">
                    <option value="pt-br">Portugu√™s (BR)</option>
                    <option value="en">English (US)</option>
                </select>
            </div>

            <div class="config-item">
                <span data-key="config_theme">Tema Visual:</span>
                <button id="toggle-theme" data-key="config_toggle_theme">Alternar Tema</button>
            </div>

            <div class="config-item">
                <span data-key="config_reset_achievements">Resetar Conquistas:</span>
                <button id="reset-achievements-btn" data-key="config_reset">Resetar</button>
            </div>

            <div class="config-item">
                <span data-key="config_reset_data">Limpar TODOS os Dados Locais (Recordes/Cliques):</span>
                <button id="clear-local-data-btn" data-key="config_clear_all">Limpar Tudo</button>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

    <script>
        // ====================================================================
        // --- CONFIGURA√á√ïES GERAIS E DADOS (Global) ---
        // ====================================================================

        const currentLang = localStorage.getItem('language') || 'pt-br';
        const currentTheme = localStorage.getItem('theme') || 'dark';

        // OBJETO DE TRADU√á√ÉO
        const translations = {
            'pt-br': {
                'nav_game': 'JOGO DO CACHORRINHO', 'nav_games': 'OUTROS JOGOS', 'nav_achievements': 'CONQUISTAS', 'nav_news': 'O QUE H√Å DE NOVO', 'nav_about': 'SOBRE',
                'title_dog_game': 'üê∂ Jogo do Cachorrinho: Sobreviv√™ncia ü¶¥',
                'score': 'Pontos: 0', 'high_score': 'Recorde: 0', 'lives': 'Vidas: 3',
                'welcome': 'Bem-vindo!', 'controls_tip': 'Use as setas para mover e **X** para atirar o osso.',
                'start_game': 'INICIAR JOGO', 'fullscreen': 'TELA CHEIA', 'game_over': 'FIM DE JOGO',
                'final_score_msg': 'Sua pontua√ß√£o final √©:', 'new_record': 'NOVO RECORDE!',
                'play_again': 'JOGAR NOVAMENTE', 'legendary_power': 'O PODER LEND√ÅRIO APARECEU!!!',
                'leaderboard_title': 'üèÜ LEADERBOARD', 'table_name': 'Nome', 'table_score': 'Pontos',
                'title_games': 'üïπÔ∏è Outros Jogos', 'favorites_title': '‚≠ê Meus Favoritos', 'all_games_title': 'Todos os Jogos',
                'no_favorites': 'Nenhum favorito selecionado. Clique na estrela ‚≠ê para adicionar!',
                'title_achievements': 'üèÖ Conquistas', 'title_news': 'üì∞ O Que H√° de Novo?',
                'title_about': 'üìú Sobre o Projeto Ryan Games 3.0',
                'about_p1': 'Este portal foi criado para reunir uma cole√ß√£o de jogos, desde prot√≥tipos em desenvolvimento (como o Jogo do Cachorrinho) at√© links de jogos favoritos. A vers√£o 3.0 foca em uma experi√™ncia de usu√°rio mais limpa, moderna e otimizada para todas as telas. O Jogo do Cachorrinho √© um projeto em **constante evolu√ß√£o**, sendo um playground para novas mec√¢nicas de jogo.',
                'about_p2': 'Desenvolvido por Ryan.',
                'footer_text': '&copy; 2025 Ryan Games 3.0 - Todos os direitos reservados. Projeto em desenvolvimento.',
                'settings_title': '‚öôÔ∏è Configura√ß√µes do Site', 'config_language': 'Idioma:', 'config_theme': 'Tema Visual:',
                'config_toggle_theme': 'Alternar Tema', 'config_reset_achievements': 'Resetar Conquistas:',
                'config_reset': 'Resetar', 'config_reset_data': 'Limpar TODOS os Dados Locais (Recordes/Cliques):',
                'config_clear_all': 'Limpar Tudo',
                // Conquistas
                'ach_unlocked': 'Conquista Desbloqueada',
                'ach_welcome_title': 'Bem-vindo(a)!', 'ach_welcome_desc': 'Abra o site pela primeira vez.',
                'ach_first_game_title': 'Primeiro Clique', 'ach_first_game_desc': 'Clique em qualquer link da se√ß√£o "Outros Jogos".',
                'ach_veteran_title': 'Veterano de Ryan', 'ach_veteran_desc': 'Alcance o N√≠vel 3 no Jogo do Cachorrinho.',
                'ach_master_title': 'Mestre da Sobreviv√™ncia', 'ach_master_desc': 'Alcance o N√≠vel 5 no Jogo do Cachorrinho.',
                // Notifica√ß√µes
                'notif_new_record': 'üéâ NOVO RECORDE! Seu nome foi adicionado ao Leaderboard.',
                'notif_cleared_data': 'üóëÔ∏è Todos os dados (recordes, cliques, conquistas) foram apagados.',
                'notif_theme_dark': '‚ö´ Modo Escuro ativado.', 'notif_theme_light': '‚ö™ Modo Claro ativado.',
                'notif_reset_achievements': 'üèÖ Conquistas resetadas com sucesso!',
                'no_records': 'Sem recordes ainda.'
            },
            'en': {
                'nav_game': 'DOGGY GAME', 'nav_games': 'OTHER GAMES', 'nav_achievements': 'ACHIEVEMENTS', 'nav_news': 'WHAT\'S NEW', 'nav_about': 'ABOUT',
                'title_dog_game': 'üê∂ Doggy Game: Survival ü¶¥',
                'score': 'Score: 0', 'high_score': 'High Score: 0', 'lives': 'Lives: 3',
                'welcome': 'Welcome!', 'controls_tip': 'Use the arrow keys to move and **X** to shoot the bone.',
                'start_game': 'START GAME', 'fullscreen': 'FULLSCREEN', 'game_over': 'GAME OVER',
                'final_score_msg': 'Your final score is:', 'new_record': 'NEW RECORD!',
                'play_again': 'PLAY AGAIN', 'legendary_power': 'LEGENDARY POWER APPEARED!!!',
                'leaderboard_title': 'üèÜ LEADERBOARD', 'table_name': 'Name', 'table_score': 'Score',
                'title_games': 'üïπÔ∏è Other Games', 'favorites_title': '‚≠ê My Favorites', 'all_games_title': 'All Games',
                'no_favorites': 'No favorites selected. Click the star ‚≠ê to add one!',
                'title_achievements': 'üèÖ Achievements', 'title_news': 'üì∞ What\'s New?',
                'title_about': 'üìú About the Ryan Games 3.0 Project',
                'about_p1': 'This portal was created to gather a collection of games, from prototypes in development (like the Doggy Game) to favorite game links. Version 3.0 focuses on a cleaner, more modern, and optimized user experience for all screens. The Doggy Game is a project in **constant evolution**, serving as a playground for new game mechanics.',
                'about_p2': 'Developed by Ryan.',
                'footer_text': '&copy; 2025 Ryan Games 3.0 - All rights reserved. Project in development.',
                'settings_title': '‚öôÔ∏è Site Settings', 'config_language': 'Language:', 'config_theme': 'Visual Theme:',
                'config_toggle_theme': 'Toggle Theme', 'config_reset_achievements': 'Reset Achievements:',
                'config_reset': 'Reset', 'config_reset_data': 'Clear ALL Local Data (High Scores/Clicks):',
                'config_clear_all': 'Clear All',
                // Achievements
                'ach_unlocked': 'Achievement Unlocked',
                'ach_welcome_title': 'Welcome!', 'ach_welcome_desc': 'Open the site for the first time.',
                'ach_first_game_title': 'First Click', 'ach_first_game_desc': 'Click any link in the "Other Games" section.',
                'ach_veteran_title': 'Ryan Veteran', 'ach_veteran_desc': 'Reach Level 3 in the Doggy Game.',
                'ach_master_title': 'Survival Master', 'ach_master_desc': 'Reach Level 5 in the Doggy Game.',
                // Notifica√ß√µes
                'notif_new_record': 'üéâ NEW HIGH SCORE! Your name was added to the Leaderboard.',
                'notif_cleared_data': 'üóëÔ∏è All local data (scores, clicks, achievements) has been cleared.',
                'notif_theme_dark': '‚ö´ Dark Mode activated.', 'notif_theme_light': '‚ö™ Light Mode activated.',
                'notif_reset_achievements': 'üèÖ Achievements successfully reset!',
                'no_records': 'No high scores yet.'
            }
        };

        // ====================================================================
        // --- FUN√á√ïES GERAIS E DE NAVEGA√á√ÉO ---
        // ====================================================================

        function translatePage(lang) {
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'BUTTON') {
                        element.textContent = translations[lang][key];
                    } else {
                        element.innerHTML = translations[lang][key];
                    }
                }
            });
            const playerNameInput = document.getElementById('player-name-input');
            if (playerNameInput) {
                playerNameInput.placeholder = lang === 'pt-br' ? 'Nome (3 letras)' : 'Name (3 letters)';
            }

            // Recarrega o conte√∫do din√¢mico traduzido
            loadGameLinks();
            renderAchievements();
            renderNews();
            renderLeaderboard();
        }

        // Tema Visual
        function applyTheme(theme) {
            if (theme === 'light') {
                document.body.classList.add('light-mode');
            } else {
                document.body.classList.remove('light-mode');
            }
            localStorage.setItem('theme', theme);
        }

        // Toast Notifications
        function showToast(message, type = 'info', duration = 4000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;

            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 50);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    container.removeChild(toast);
                }, 500);
            }, duration);
        }

        // ====================================================================
        // --- FUN√á√ïES DE DADOS E L√ìGICA (Geral) ---
        // ====================================================================

        // --- Leaderboard ---
        function getLeaderboard() {
            return JSON.parse(localStorage.getItem('leaderboard')) || [];
        }
        function saveLeaderboard(leaderboard) {
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        }
        function addScoreToLeaderboard(name, score) {
            let leaderboard = getLeaderboard();
            leaderboard.push({ name: name.toUpperCase().substring(0, 3), score: score });
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 10);
            saveLeaderboard(leaderboard);
            renderLeaderboard();
        }
        function renderLeaderboard() {
            const body = document.getElementById('leaderboard-body');
            if (!body) return;

            body.innerHTML = '';
            const leaderboard = getLeaderboard();

            if (leaderboard.length === 0) {
                body.innerHTML = `<tr><td colspan="3" style="text-align: center; opacity: 0.7;">${translations[currentLang].no_records}</td></tr>`;
                return;
            }

            leaderboard.forEach((entry, index) => {
                const row = body.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${entry.name}</td>
                    <td>${entry.score}</td>
                `;
            });
        }

        // --- Conquistas ---
        const achievementsList = [
            { key: 'welcome', icon: 'üëã', ptTitle: 'Bem-vindo(a)!', enTitle: 'Welcome!', ptDesc: 'Abra o site pela primeira vez.', enDesc: 'Open the site for the first time.', check: () => true },
            { key: 'first_click', icon: 'üñ±Ô∏è', ptTitle: 'Primeiro Clique', enTitle: 'First Click', ptDesc: 'Clique em qualquer link da se√ß√£o "Outros Jogos".', enDesc: 'Click any link in the "Other Games" section.', check: (data) => data.totalClicks > 0 },
            { key: 'veteran', icon: 'üéñÔ∏è', ptTitle: 'Veterano de Ryan', enTitle: 'Ryan Veteran', ptDesc: 'Alcance o N√≠vel 3 no Jogo do Cachorrinho.', enDesc: 'Reach Level 3 in the Doggy Game.', check: (data) => data.maxLevel >= 3 },
            { key: 'master', icon: 'üëë', ptTitle: 'Mestre da Sobreviv√™ncia', enTitle: 'Survival Master', ptDesc: 'Alcance o N√≠vel 5 no Jogo do Cachorrinho.', enDesc: 'Reach Level 5 in the Doggy Game.', check: (data) => data.maxLevel >= 5 }
        ];
        function getAchievementData() {
            const data = JSON.parse(localStorage.getItem('achievements')) || {};
            data.totalClicks = data.totalClicks || 0;
            data.maxLevel = data.maxLevel || 1;
            return data;
        }
        function saveAchievementData(data) {
            localStorage.setItem('achievements', JSON.stringify(data));
        }
        function checkAchievement(key, value) {
            let data = getAchievementData();

            if (key === 'click') data.totalClicks = (data.totalClicks || 0) + value;
            if (key === 'level' && value > (data.maxLevel || 1)) data.maxLevel = value;

            let unlocked = false;
            achievementsList.forEach(achievement => {
                 if (!data[achievement.key] && achievement.check(data)) {
                    data[achievement.key] = true;
                    unlocked = true;
                    const titleKey = currentLang === 'pt-br' ? 'ptTitle' : 'enTitle';
                    showToast(`üèÖ ${translations[currentLang].ach_unlocked}: ${achievement[titleKey]}`, 'success');
                }
            });

            saveAchievementData(data);
            renderAchievements(); // Atualiza a se√ß√£o se estiver vis√≠vel
            return unlocked;
        }
        function renderAchievements() {
            const data = getAchievementData();
            const list = document.getElementById('achievements-list');
            if (!list) return;

            list.innerHTML = '';

            achievementsList.forEach(ach => {
                const isUnlocked = data[ach.key] === true;
                const titleKey = currentLang === 'pt-br' ? 'ptTitle' : 'enTitle';
                const descKey = currentLang === 'pt-br' ? 'ptDesc' : 'enDesc';

                const item = document.createElement('div');
                item.className = `achievement-item ${isUnlocked ? 'unlocked' : ''}`;
                item.innerHTML = `
                    <div class="achievement-icon">${isUnlocked ? ach.icon : '‚ùì'}</div>
                    <div class="achievement-info">
                        <div class="achievement-title">${ach[titleKey]}</div>
                        <div class="achievement-description">${ach[descKey]}</div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // --- Not√≠cias (Changelog) ---
        const newsData = [
            { date: '19/Nov/2025', pt: 'Lan√ßamento do Ryan Games 3.0: Novo design e c√≥digo consolidado em arquivo √∫nico.', en: 'Ryan Games 3.0 Launch: New design and consolidated code in a single file.' },
            { date: '05/Nov/2025', pt: 'Sistema de Leaderboard e N√≠veis de dificuldade adicionados ao Jogo do Cachorrinho.', en: 'Leaderboard and difficulty levels added to the Doggy Game.' },
            { date: '28/Out/2025', pt: 'Implementa√ß√£o de tiro direcional e barra de recarga no jogo.', en: 'Directional shooting and cooldown bar implemented in the game.' }
        ];
        function renderNews() {
            const list = document.getElementById('news-list');
            if (!list) return;

            list.innerHTML = '';

            newsData.forEach(item => {
                const textKey = currentLang === 'pt-br' ? 'pt' : 'en';
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <small>${item.date}</small>
                    <h4>${item[textKey]}</h4>
                `;
                list.appendChild(newsItem);
            });
        }

        // --- Jogos e Favoritos ---
        const gamesList = [
            { name: "andrewclark3244 games", href: "andrewclark.html" },
            { name: "Superhot Prototype", href: "superhot.html" },
            { name: "Stickman Climb 2", href: "stickman.html" },
            { name: "3kh0s Games", href: "3kh0s.html" },
            { name: "Bowl Game", href: "bowl.html" },
            { name: "UCBG", href: "ucbg.html" },
            { name: "Game Dump", href: "gamedump.html" },
            { name: "Freeze Nova", href: "freezenova.html" },
            { name: "Retro Games", href: "retrogames.html" },
            { name: "Quiz-40", href: "quiz40.html" },
            { name: "animeeeeee", href: "anime.html" }
        ];
        function getFavorites() {
            return JSON.parse(localStorage.getItem('favorites')) || {};
        }
        function toggleFavorite(key) {
            const favorites = getFavorites();
            if (favorites[key]) {
                delete favorites[key];
            } else {
                favorites[key] = true;
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            loadGameLinks();
        }
        function createLinkElement(game, key, clickCount, isFavorite) {
            const linkElement = document.createElement('a');
            linkElement.href = game.href;
            linkElement.className = 'link-item';
            linkElement.setAttribute('data-game-key', key);

            linkElement.innerHTML = `
                <span>${game.name}</span>
                <div class="link-controls">
                    <span class="link-counter">${currentLang === 'pt-br' ? 'Cliques' : 'Clicks'}: ${clickCount}</span>
                    <button class="favorite-btn ${isFavorite ? 'active' : ''}" title="${currentLang === 'pt-br' ? 'Adicionar/Remover dos Favoritos' : 'Add/Remove from Favorites'}">
                        ${isFavorite ? '‚òÖ' : '‚òÜ'}
                    </button>
                </div>
            `;
            return linkElement;
        }
        function loadGameLinks() {
            const container = document.getElementById('links-grid-container');
            const favoritesContainer = document.getElementById('favorites-grid-container');
            if (!container || !favoritesContainer) return;

            const favorites = getFavorites();

            container.innerHTML = '';
            favoritesContainer.innerHTML = '';
            let hasFavorites = false;

            gamesList.forEach(game => {
                const key = game.href.split('.')[0];
                const clickCount = localStorage.getItem(`click_count_${key}`) || 0;
                const isFavorite = favorites[key] || false;

                const linkElement = createLinkElement(game, key, clickCount, isFavorite);

                // Evento de Clique
                linkElement.addEventListener('click', (e) => {
                    e.preventDefault();
                    checkAchievement('click', 1);

                    let currentCount = parseInt(localStorage.getItem(`click_count_${key}`) || 0);
                    currentCount++;
                    localStorage.setItem(`click_count_${key}`, currentCount);

                    setTimeout(() => {
                        window.location.href = game.href;
                    }, 200);
                });

                // Evento de Favoritar
                linkElement.querySelector('.favorite-btn').addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleFavorite(key);
                });

                container.appendChild(linkElement);

                if (isFavorite) {
                    favoritesContainer.appendChild(createLinkElement(game, key, clickCount, isFavorite));
                    hasFavorites = true;
                }
            });

            const noFavoritesP = document.getElementById('no-favorites');
            if (noFavoritesP) noFavoritesP.style.display = hasFavorites ? 'none' : 'block';
        }

        // ====================================================================
        // --- C√ìDIGO DO JOGO DO CACHORRINHO (Funcional) ---
        // ====================================================================

        // Vari√°veis DOM do Jogo
        let canvas, ctx, scoreDisplay, highScoreDisplay, livesDisplay, startScreen, startGameButton, fullscreenButton, gameOverScreen, finalScoreDisplay, newHighScoreMessage, restartButton, legendaryMessage, gameWrapper, playerNameInput;

        // Sprites (IMPORTANTE: Atualize os caminhos se usar imagens locais)
        const dogSprite = new Image(); dogSprite.src = 'https://i.imgur.com/JK4EiTy.png';
        const tongueSprite = new Image(); tongueSprite.src = 'https://i.imgur.com/k9v9i2Y.png';
        const boneSprite = new Image(); boneSprite.src = 'https://i.imgur.com/NlQfX3h.png';
        
        // Apenas para simula√ß√£o. Se for usar imagens reais, garanta o upload.
        const powerupImages = {
            'speed': 'https://i.imgur.com/83pQpL4.png', // Exemplo de imagem para speed
            'life': 'https://i.imgur.com/1B9qD2s.png',   // Exemplo de imagem para life
            'rainbow': 'https://i.imgur.com/qU0F6sM.png' // Exemplo de imagem para rainbow
        };
        const loadedPowerupImages = {};
        for (const type in powerupImages) {
            loadedPowerupImages[type] = new Image();
            loadedPowerupImages[type].src = powerupImages[type];
        }

        // Vari√°veis de Estado do Jogo
        let player, enemies, powerups, bones, floatingTexts, lastMoveX, lastMoveY, dx, dy, score, lives, highScore, gameInterval, isGameOver, lifePowerupActive, doubleScoreActive, speedBoostActive, rainbowBlinkActive, showTongue, doubleScoreTimer, rainbowBlinkTimer, enemySpawnTimer, powerupSpawnTimer, invulnerableTimer, boneCooldown, gameSpeedMultiplier, currentLevel;

        // Constantes
        const LEVEL_THRESHOLD = 100;
        const RAINBOW_DURATION = 15000;
        const BONE_COOLDOWN_MAX = 60; // Cooldown mais longo para teste
        const FPS = 60;

        // --- Fun√ß√µes de Inicializa√ß√£o ---

        function initGameDOM() {
            canvas = document.getElementById('snake-game');
            if (!canvas) return false;
            ctx = canvas.getContext('2d');
            scoreDisplay = document.getElementById('score');
            highScoreDisplay = document.getElementById('high-score');
            livesDisplay = document.getElementById('lives');
            startScreen = document.getElementById('start-screen');
            startGameButton = document.getElementById('start-button');
            fullscreenButton = document.getElementById('fullscreen-button');
            gameOverScreen = document.getElementById('game-over-screen');
            finalScoreDisplay = document.getElementById('final-score');
            newHighScoreMessage = document.getElementById('new-high-score-message');
            restartButton = document.getElementById('restart-button');
            legendaryMessage = document.getElementById('legendary-message');
            gameWrapper = document.getElementById('dog-game-controls');
            playerNameInput = document.getElementById('player-name-input');

            // Adicionar evento ao bot√£o de tela cheia
            if (fullscreenButton) fullscreenButton.addEventListener('click', toggleFullscreen);

            return true;
        }

        function initGameVariables() {
            highScore = localStorage.getItem('highScore') || 0;
            player = { x: 300, y: 300, size: 40, speed: 5 }; // Velocidade base aumentada
            enemies = [];
            powerups = [];
            bones = [];
            floatingTexts = [];
            lastMoveX = 1; lastMoveY = 0;
            dx = 0; dy = 0;
            score = 0;
            lives = 3;
            gameInterval = null;
            isGameOver = true;
            doubleScoreActive = false;
            speedBoostActive = false;
            rainbowBlinkActive = false;
            showTongue = false;
            doubleScoreTimer = null;
            rainbowBlinkTimer = null;
            enemySpawnTimer = 0;
            powerupSpawnTimer = 0;
            invulnerableTimer = 0;
            boneCooldown = 0;
            gameSpeedMultiplier = 1;
            currentLevel = 1;
        }

        // --- Fun√ß√µes de Display e L√≥gica do Jogo ---

        function updateHighScore() {
            if (highScoreDisplay) highScoreDisplay.textContent = `${currentLang === 'pt-br' ? 'Recorde' : 'High Score'}: ${highScore}`;
        }

        function updateLivesDisplay() {
            if (livesDisplay) {
                const heart = '‚ù§Ô∏è';
                livesDisplay.innerHTML = `${currentLang === 'pt-br' ? 'Vidas' : 'Lives'}: ${heart.repeat(lives)}`;
                if (lives <= 0) livesDisplay.innerHTML = `${currentLang === 'pt-br' ? 'Vidas' : 'Lives'}: 0`;
            }
        }

        function toggleFullscreen() {
            const element = document.getElementById('dog-game-controls');
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.webkitRequestFullscreen) { /* Safari */
                element.webkitRequestFullscreen();
            } else if (element.msRequestFullscreen) { /* IE11 */
                element.msRequestFullscreen();
            }
        }

        function startGame() {
            if (!ctx) return;

            initGameVariables(); // Reseta todas as vari√°veis do jogo
            updateHighScore();
            updateLivesDisplay();

            // Esconde telas e mostra o canvas
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            canvas.style.display = 'block';

            isGameOver = false;

            // Resetar estado visual do corpo
            document.body.style.backgroundColor = 'var(--bg-dark)';
            document.querySelector('#dog-game').style.backgroundColor = 'rgba(25, 25, 25, 0.9)';

            if (gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(update, 1000 / FPS); // Inicia o loop do jogo
        }

        function endGame() {
            isGameOver = true;
            clearInterval(gameInterval);
            canvas.style.display = 'none';

            const finalScore = Math.floor(score);
            if (finalScoreDisplay) finalScoreDisplay.textContent = finalScore;
            if (newHighScoreMessage) newHighScoreMessage.style.display = 'none';

            // Resetar estado visual do corpo
            document.body.style.backgroundColor = 'var(--bg-dark)';
            document.querySelector('#dog-game').style.backgroundColor = 'rgba(25, 25, 25, 0.9)';
            if (legendaryMessage) legendaryMessage.style.display = 'none';

            let isNewHighScore = false;
            if (finalScore > highScore) {
                highScore = finalScore;
                localStorage.setItem('highScore', highScore);
                updateHighScore();
                if (newHighScoreMessage) newHighScoreMessage.style.display = 'block';
                isNewHighScore = true;
            }

            if (playerNameInput) {
                playerNameInput.value = '';
                playerNameInput.style.display = isNewHighScore || finalScore > 0 ? 'block' : 'none';
            }

            if (gameOverScreen) gameOverScreen.style.display = 'flex';

            // Adiciona listener para salvar o score (apenas na tela de game over)
            const saveScoreAndRestart = () => {
                const playerName = playerNameInput.value.trim() || (currentLang === 'pt-br' ? 'AN√î' : 'ANO');
                if (finalScore > 0) {
                    addScoreToLeaderboard(playerName, finalScore);
                    if (isNewHighScore) {
                        showToast(translations[currentLang].notif_new_record, 'success');
                    }
                }
                restartButton.removeEventListener('click', saveScoreAndRestart);
                startGame();
            };

            if (restartButton) restartButton.addEventListener('click', saveScoreAndRestart);
        }

        function drawLevel() {
            ctx.fillStyle = 'var(--game-info-color)';
            ctx.font = 'bold 30px Press Start 2P';
            ctx.textAlign = 'center';
            ctx.fillText(`${currentLang === 'pt-br' ? 'N√çVEL' : 'LEVEL'} ${currentLevel}`, canvas.width / 2, 40);
        }

        function drawPlayer() {
            ctx.save();
            if (invulnerableTimer > 0) {
                ctx.globalAlpha = (Math.floor(invulnerableTimer / 10) % 2) ? 0.5 : 1;
            }

            ctx.drawImage(dogSprite, player.x, player.y, player.size, player.size);

            if (showTongue) {
                ctx.drawImage(tongueSprite, player.x + player.size, player.y + player.size / 2 - 10, 30, 20);
            }

            ctx.restore();
        }

        function drawEnemies() {
            enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.beginPath();
                ctx.arc(enemy.x + enemy.size / 2, enemy.y + enemy.size / 2, enemy.size / 2, 0, Math.PI * 2);
                ctx.fill();

                ctx.strokeStyle = 'white';
                ctx.lineWidth = 1;
                ctx.stroke();
            });
        }

        function drawPowerups() {
            powerups.forEach(p => {
                const img = loadedPowerupImages[p.type];
                if (img && img.complete) {
                    ctx.drawImage(img, p.x, p.y, p.size, p.size);
                } else {
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size);
                }
            });
        }

        function drawBones() {
            bones.forEach(bone => {
                ctx.drawImage(boneSprite, bone.x, bone.y, bone.width, bone.height);
            });
        }

        function drawFloatingTexts() {
            floatingTexts = floatingTexts.filter(text => text.lifetime > 0);
            floatingTexts.forEach(text => {
                ctx.fillStyle = text.color;
                ctx.font = 'bold 15px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(text.text, text.x, text.y);
                text.y -= 0.5;
                text.lifetime--;
            });
        }

        function drawBoneCooldown() {
            if (boneCooldown > 0) {
                const barWidth = 100;
                const barHeight = 10;
                const barX = canvas.width - barWidth - 10;
                const barY = 10;

                ctx.strokeStyle = '#fff';
                ctx.strokeRect(barX, barY, barWidth, barHeight);

                const fillWidth = barWidth * (1 - boneCooldown / BONE_COOLDOWN_MAX);
                ctx.fillStyle = 'lime';
                ctx.fillRect(barX, barY, fillWidth, barHeight);
            }
        }


        function shootBone() {
            if (boneCooldown > 0) return;

            const dirX = lastMoveX;
            const dirY = lastMoveY;

            if (dirX === 0 && dirY === 0) return;

            bones.push({
                x: player.x + player.size / 2,
                y: player.y + player.size / 2,
                width: 30,
                height: 15,
                speed: 10,
                dirX: dirX,
                dirY: dirY
            });

            boneCooldown = BONE_COOLDOWN_MAX;
        }

        function changeDirection(event) {
            if (isGameOver) return;
            const key = event.keyCode;
            const playerSpeed = player.speed * gameSpeedMultiplier;
            const canvasSize = 600;

            if (key === 37) { // Left
                dx = -1; lastMoveX = -1; lastMoveY = 0;
            } else if (key === 39) { // Right
                dx = 1; lastMoveX = 1; lastMoveY = 0;
            } else if (key === 38) { // Up
                dy = -1; lastMoveY = -1; lastMoveX = 0;
            } else if (key === 40) { // Down
                dy = 1; lastMoveY = 1; lastMoveX = 0;
            } else if (key === 88) { // X
                shootBone();
                showTongue = true;
                setTimeout(() => showTongue = false, 200);
            }
        }

        function spawnEnemy() {
            if (enemies.length >= 10 + currentLevel * 2) return;

            const size = 30;
            let x, y;
            const edge = Math.floor(Math.random() * 4); // 0: Top, 1: Right, 2: Bottom, 3: Left

            if (edge === 0) { x = Math.random() * canvas.width; y = -size; }
            else if (edge === 1) { x = canvas.width; y = Math.random() * canvas.height; }
            else if (edge === 2) { x = Math.random() * canvas.width; y = canvas.height; }
            else if (edge === 3) { x = -size; y = Math.random() * canvas.height; }

            const targetX = canvas.width / 2;
            const targetY = canvas.height / 2;
            const angle = Math.atan2(targetY - y, targetX - x);
            const speed = 1 + currentLevel * 0.2;

            enemies.push({
                x: x, y: y, size: size,
                speedX: Math.cos(angle) * speed,
                speedY: Math.sin(angle) * speed,
                color: 'red'
            });
        }

        function spawnPowerup() {
            if (powerups.length >= 2) return;

            const type = Math.random() < 0.1 ? 'rainbow' : (Math.random() < 0.5 ? 'life' : 'speed');
            const color = type === 'rainbow' ? 'purple' : (type === 'life' ? 'green' : 'blue');
            const size = 25;

            powerups.push({
                x: Math.random() * (canvas.width - size),
                y: Math.random() * (canvas.height - size),
                size: size,
                color: color,
                type: type,
                lifetime: 300
            });
        }

        function checkCollision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.size &&
                   obj1.x + obj1.size > obj2.x &&
                   obj1.y < obj2.y + obj2.size &&
                   obj1.y + obj1.size > obj2.y;
        }

        function checkCollisionBone(bone, enemy) {
            return bone.x < enemy.x + enemy.size &&
                   bone.x + bone.width > enemy.x &&
                   bone.y < enemy.y + enemy.size &&
                   bone.y + bone.height > enemy.y;
        }

        function applyPowerup(type) {
            if (type === 'speed') {
                player.speed *= 1.5;
                speedBoostActive = true;
                showToast(currentLang === 'pt-br' ? 'üöÄ Velocidade Aumentada!' : 'üöÄ Speed Boost!', 'info', 5000);
                setTimeout(() => {
                    player.speed /= 1.5;
                    speedBoostActive = false;
                }, 8000);
            } else if (type === 'life') {
                lives++;
                updateLivesDisplay();
                showToast(currentLang === 'pt-br' ? '‚ù§Ô∏è Vida Extra Recebida!' : '‚ù§Ô∏è Extra Life Gained!', 'success', 3000);
            } else if (type === 'rainbow') {
                doubleScoreActive = true;
                rainbowBlinkActive = true;
                legendaryMessage.style.display = 'block';
                showToast(currentLang === 'pt-br' ? '‚ú® B√¥nus Lend√°rio Ativado!' : '‚ú® Legendary Bonus Activated!', 'success', RAINBOW_DURATION);

                if (doubleScoreTimer) clearTimeout(doubleScoreTimer);
                doubleScoreTimer = setTimeout(() => {
                    doubleScoreActive = false;
                    rainbowBlinkActive = false;
                    legendaryMessage.style.display = 'none';
                    document.body.style.backgroundColor = 'var(--bg-dark)';
                    document.querySelector('#dog-game').style.backgroundColor = 'rgba(25, 25, 25, 0.9)';
                }, RAINBOW_DURATION);
            }
        }

        function update() {
            if (isGameOver || !ctx) return;

            const updateRate = 1 * gameSpeedMultiplier;

            // L√≥gica de N√≠vel
            const nextLevelScore = currentLevel * LEVEL_THRESHOLD;
            if (score >= nextLevelScore) {
                currentLevel++;
                checkAchievement('level', currentLevel);
            }

            // Timers
            if (invulnerableTimer > 0) invulnerableTimer -= updateRate;
            if (boneCooldown > 0) boneCooldown -= updateRate;
            if (gameSpeedMultiplier < 1) gameSpeedMultiplier += 0.05;
            if (gameSpeedMultiplier > 1) gameSpeedMultiplier = 1;

            // Spawns
            enemySpawnTimer += updateRate;
            powerupSpawnTimer += updateRate;
            if (enemySpawnTimer >= 60 - currentLevel * 5) {
                spawnEnemy();
                enemySpawnTimer = 0;
            }
            if (powerupSpawnTimer >= 300) {
                spawnPowerup();
                powerupSpawnTimer = 0;
            }

            // Pontua√ß√£o
            score += (doubleScoreActive ? 0.02 : 0.01) * updateRate;
            if (scoreDisplay) scoreDisplay.textContent = `${currentLang === 'pt-br' ? 'Pontos' : 'Score'}: ${Math.floor(score)}`;


            // Efeito Rainbow
            if (rainbowBlinkActive) {
                const r = Math.floor(Math.random() * 255);
                const g = Math.floor(Math.random() * 255);
                const b = Math.floor(Math.random() * 255);
                document.body.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
                document.querySelector('#dog-game').style.backgroundColor = `rgba(${255 - r}, ${255 - g}, ${255 - b}, 0.9)`;
            }

            // Movimento do Player e Limites
            player.x += dx * player.speed * updateRate;
            player.y += dy * player.speed * updateRate;
            if (player.x < 0) player.x = 0;
            if (player.x + player.size > canvas.width) player.x = canvas.width - player.size;
            if (player.y < 0) player.y = 0;
            if (player.y + player.size > canvas.height) player.y = canvas.height - player.size;

            // Movimento e Colis√£o dos Ossos
            bones = bones.filter(bone => {
                bone.x += bone.dirX * bone.speed * updateRate;
                bone.y += bone.dirY * bone.speed * updateRate;

                for (let i = 0; i < enemies.length; i++) {
                    const enemy = enemies[i];
                    if (checkCollisionBone(bone, enemy)) {
                        enemies.splice(i, 1);
                        const points = doubleScoreActive ? 2 : 1;
                        score += points;

                        floatingTexts.push({
                            text: `+${points}`, x: enemy.x + enemy.size / 2, y: enemy.y,
                            color: doubleScoreActive ? 'yellow' : 'lime', lifetime: 60,
                        });

                        return false; // Remove o osso
                    }
                }
                return bone.x < canvas.width && bone.x > -bone.width && bone.y < canvas.height && bone.y > -bone.height;
            });

            // Movimento e Colis√£o dos Inimigos
            enemies = enemies.filter(enemy => {
                enemy.x += enemy.speedX * updateRate;
                enemy.y += enemy.speedY * updateRate;

                // Colis√£o simples
                if (checkCollision(player, enemy) && invulnerableTimer === 0) {
                    lives--;
                    updateLivesDisplay();
                    if (lives <= 0) {
                        endGame();
                    } else {
                        invulnerableTimer = 180;
                        gameSpeedMultiplier = 0.1; // Slow motion
                    }
                }
                return true;
            });

            // Movimento e Colis√£o dos Powerups
            powerups = powerups.filter(p => {
                if (checkCollision(player, p)) {
                    applyPowerup(p.type);
                    return false;
                }
                p.lifetime--;
                return p.lifetime > 0;
            });

            draw();
        }

        function draw() {
            if (!ctx) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLevel();
            drawPlayer();
            drawEnemies();
            drawPowerups();
            drawBones();
            drawFloatingTexts();
            drawBoneCooldown();
        }


        // ====================================================================
        // --- INICIALIZA√á√ÉO DA P√ÅGINA (DOMContentLoaded) ---
        // ====================================================================

        document.addEventListener('DOMContentLoaded', () => {
            // Aplica tema e idioma
            applyTheme(currentTheme);
            translatePage(currentLang);

            // --- L√≥gica do Modal de Configura√ß√µes ---
            const modal = document.getElementById('settings-modal');
            const btn = document.getElementById('settings-button');
            const span = document.getElementById('close-settings-modal');
            const langSelector = document.getElementById('language-selector');

            if (btn) btn.onclick = () => { modal.style.display = "block"; };
            if (span) span.onclick = () => { modal.style.display = "none"; };
            window.onclick = (event) => {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            };
            if(langSelector) {
                langSelector.value = currentLang;
                langSelector.addEventListener('change', (e) => {
                    const newLang = e.target.value;
                    localStorage.setItem('language', newLang);
                    translatePage(newLang); // Atualiza a p√°gina imediatamente
                });
            }

            // Configura√ß√µes - Alternar Tema
            document.getElementById('toggle-theme').addEventListener('click', () => {
                const newTheme = document.body.classList.contains('light-mode') ? 'dark' : 'light';
                applyTheme(newTheme);
                showToast(newTheme === 'dark' ? translations[currentLang].notif_theme_dark : translations[currentLang].notif_theme_light, 'info');
            });

            // Configura√ß√µes - Limpar Dados
            document.getElementById('clear-local-data-btn').addEventListener('click', () => {
                if (confirm(currentLang === 'pt-br' ? 'Tem certeza que deseja apagar todos os recordes, cliques e conquistas?' : 'Are you sure you want to clear all high scores, clicks, and achievements?')) {
                    localStorage.clear();
                    showToast(translations[currentLang].notif_cleared_data, 'warning');
                    setTimeout(() => window.location.reload(), 1500);
                }
            });

            // Configura√ß√µes - Resetar Conquistas
            document.getElementById('reset-achievements-btn').addEventListener('click', () => {
                if (confirm(currentLang === 'pt-br' ? 'Tem certeza que deseja resetar todas as suas conquistas?' : 'Are you sure you want to reset all your achievements?')) {
                    localStorage.removeItem('achievements');
                    showToast(translations[currentLang].notif_reset_achievements, 'info');
                    renderAchievements(); // Atualiza a lista na tela
                }
            });


            // --- L√≥gica Espec√≠fica do Jogo ---
            if (initGameDOM()) {
                initGameVariables();
                updateHighScore();

                if (startGameButton) startGameButton.addEventListener('click', startGame);

                // Listener de teclado para o jogo
                document.addEventListener('keydown', changeDirection);

                // Conquista de "Bem-vindo"
                checkAchievement('welcome', 0);
            }

            // Renderiza se√ß√µes din√¢micas na inicializa√ß√£o (repetido da translatePage para garantir)
            loadGameLinks();
            renderAchievements();
            renderNews();
            renderLeaderboard();
        });
    </script>
</body>
</html>
```
